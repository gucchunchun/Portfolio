---
import { getCollection } from 'astro:content';

const allPosts = await getCollection("posts");
const sortedPosts = allPosts.sort((a, b) =>
  new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf()
);
---

<html lang="en">
  <head>
    <title>My Astro Blog</title>
  </head>
  <body>
    <h1>Blog Posts</h1>
    <ul>
      {sortedPosts.map((post) => (
        <li>
          <a href={`/blogs/${post.slug}/`}>{post.data.title}</a> 
          <span>({post.data.pubDate})</span>
        </li>
      ))}
    </ul>
  </body>
</html>
